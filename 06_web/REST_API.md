# REST API

- REST ì•„í‚¤í…ì²˜ì˜ ì œì•½ì¡°ê±´ì„ ì¤€ìˆ˜í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œê·¸ë˜ë° ì¸í„°í˜ì´ìŠ¤
- `RE`presentational `S`tate `T`ransfer

## ğŸ“Œ API
- `A`pplication `P`rogramming `I`nterface
- ì• í”Œë¦¬ì¼€ì´ì…˜ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ êµ¬ì¶•í•˜ê³  í†µí•©í•˜ëŠ” ì •ì˜, í”„ë¡œí† ì½œ ì„¸íŠ¸
- `ì •ë³´ ì œê³µì - ì •ë³´ ì‚¬ìš©ì` ê°„ `í˜¸ì¶œ - ì‘ë‹µ` êµ¬ì¡°ë¥¼ êµ¬ì„±
- ì»´í“¨í„°, ì‹œìŠ¤í…œê³¼ ìƒí˜¸ ì‘ìš©í•´ì„œ ì •ë³´ë¥¼ ê²€ìƒ‰í•˜ê±°ë‚˜ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ê³ ì í•  ë•Œ APIê°€ ì¡°ì •ì ì—­í• ì„ í•¨
<img width="770" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-12-07 á„‹á…©á„’á…® 10 05 19" src="https://user-images.githubusercontent.com/41675375/145034991-52e4fa73-f32f-4c6d-8329-3e1ec708ef23.png">
- `ìœ ì—°ì„±`: ëª…ì¹­ì—ë„ ì•Œ ìˆ˜ ìˆë“¯ `interface` ì—­í• ì„ í•œë‹¤ëŠ” ê²ƒì´ í•µì‹¬ì´ë¼ ìƒê°
  - APIë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìš©ìëŠ” API ë‚´ë¶€ ë™ì‘ ë°©ì‹ì„ ì•Œì§€ë„ ëª»í•˜ê³  ì•Œ í•„ìš”ë„ ì—†ëŠ” ìƒíƒœë¡œ ìš”ì²­ì„ ë³´ë‚´ëŠ” ë°©ì‹ë§Œ ì•Œë©´ ì›í•˜ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ì‘ë‹µìœ¼ë¡œ ë°›ì„ ìˆ˜ ìˆìŒ
  - ì‚¬ìš© ë°©ë²•ì„ ê°„ì†Œí™” í•¨ìœ¼ë¡œì¨ ì—¬ëŸ¬ ë‹¤ì–‘í•œ ì„œë¹„ìŠ¤ë“¤ì„ ì—°ê²°í•˜ê³  API ë‚´ë¶€ë¥¼ ìˆ˜ì •í•´ë„ ì™¸ë¶€ì—ëŠ” ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì ì—ì„œ ìœ ì—°í•œ ê´€ë¦¬ê°€ ê°€ëŠ¥

## ğŸ“Œ SOAP API
- `S`imple `O`bject `A`ccess `P`rotocol
- APIì—ì„œ REST APIì™€ ë”ë¶ˆì–´ ê°™ì´ ì–¸ê¸‰ë˜ëŠ” SOAP API
- ë³´ì•ˆì´ë‚˜ ë©”ì‹œì§€ ì „ì†¡ì— ìˆì–´ RESTë³´ë‹¤ ë” ë§ì€ í‘œì¤€ë“¤ì´ ì •í•´ì ¸ ìˆìŒ
- ë³´ì•ˆ, íŠ¸ëœì­ì…˜, ACIDì›ì¹™ì„ ì¤€ìˆ˜í•´ì•¼ í•˜ëŠ” ê¸°ëŠ¥ë“¤ì— ì í•©
- ë³´ì•ˆìˆ˜ì¤€ì´ ì—„ê²©í•´ì„œ ê¸ˆìœµê´€ë ¨ ì„œë¹„ìŠ¤, ë©”ì‹œì§• ì•± ë“±ì—ì„œ ì‚¬ìš©ë˜ê³  ìˆìŒ
- SOAP í‘œì¤€ì— ì„±ê³µ/ë°˜ë³µ ì‹¤í–‰ ë¡œì§ì´ ê·œì •ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ì´ë¥¼ í†µí•´ í†µì‹ ì„ í•˜ëŠ” ê²½ìš° ëê¹Œì§€ ì‹ ë¢°ì„±ì„ ì œê³µí•˜ê²Œ ë¨
- ë¹ŒíŠ¸ì¸ ë£°ì„ ì ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì˜¤ë²„í—¤ë“œê°€ ì¡´ì¬, í˜ì´ì§€ ë¡œë“œ ì‹œê°„ì´ ê¸¸ì–´ì§ˆ ìˆ˜ ìˆìŒ

## ğŸ“Œ REST API
- `RE`presentational `S`tate `T`ransfer
- URIì™€ HTTP í”„ë¡œí† ì½œ ê¸°ë°˜ìœ¼ë¡œ í•¨(í´ë¼ì´ì–¸íŠ¸-ì„œë²„ ëª¨ë¸ë¡œ êµ¬ì¶•)
- ë‹¨ìˆœí•˜ë‹¤ëŠ” ì¥ì ì´ ìˆìŒ(ë‹¨ì¼í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ë™ì¼í•œ ê²½ë¡œë¥¼ í†µí•´ì„œ ì ‘ì†)

### íŠ¹ì§•
- í´ë¼ì´ì–¸íŠ¸ - ì„œë²„ ì•„í‚¤í…ì²˜ì—ì„œ ì‘ë™
- Uniform interfaceë¡œ ì‘ë™
  - URIë¡œ ì§€ì •í•œ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì¡°ì‘ì„ ì¼ê´€ëœ ë°©ì‹ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ì•„í‚¤í…ì²˜ ìŠ¤íƒ€ì¼
- Statelessí•œ íŠ¹ì§•ì´ ìˆìŒ
  - ì‘ì—…ì„ ìœ„í•œ ìƒíƒœì •ë³´ë¥¼ ë”°ë¡œ ì €ì¥í•˜ì§€ ì•ŠëŠ”ë‹¤.
  - ì„¸ì…˜, ì¿ í‚¤ì •ë³´ë¥¼ ë”°ë¡œ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ìš”ì²­, ì‘ë‹µì„ í†µí•´ ì •ë³´ë¥¼ ì£¼ê³ ë°›ê¸°ë§Œ í•¨
- ë°ì´í„° ìºì‹œ ê¸°ëŠ¥ ì œê³µ
  - REST ë°©ì‹ì€ HTTP ë°©ì‹ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©
  - [HTTPê°€ ê°€ì§„ ìºì‹± ê¸°ëŠ¥](https://hahahoho5915.tistory.com/33)ì„ ì ìš© ê°€ëŠ¥ 
- ì—¬ëŸ¬ í…Œì´í„° í¬ë©§ì„ ë‹¤ë£° ìˆ˜ ìˆìŒ
  - HTML, TEXT, JSON, XML ë“±...
  - REST ë°©ì‹ì€ JSON ë°©ì‹ì„ ì„ í˜¸(ë¸Œë¼ìš°ì €ê°„ í˜¸í™˜ì„±ì´ ì¢‹ìŒ)
- ê³„ì¸µí˜• êµ¬ì¡°
  - ë‹¤ì¤‘ ê³„ì¸µìœ¼ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— **ìœ ì—°í•œ êµ¬ì¡°**ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìŒ
  - ë³´ì•ˆ, ë¡œë“œ ë°¸ëŸ°ì‹±, ì•”í˜¸í™” ê³„ì¸µì„ ì¶”ê°€í•œë‹¤ê±°ë‚˜ Proxy, Gatewayê°™ì€ ë„¤íŠ¸ì›Œí¬ ê¸°ë°˜ ì¤‘ê°„ë§¤ì²´ ì‚¬ìš© ê°€ëŠ¥

## ğŸ“Œ SOAP, REST ë°©ì‹ì˜ ì°¨ì´

|  | SOAP | REST 
 :---: | :---: |:---:
 ìœ í˜• | Protocol | Architecture
 ë°ì´í„°í¬ë©§ | XML | Text, HTML, XML, JSON, ...
 ë³´ì•ˆ | WS-Security, SSL | [HTTPS](https://github.com/beaniejoy/TIL/blob/main/06_web/https.md), SSL
 ì—°ê²° | ê¸´ë°€í•œ ì—°ê²°, í†µì‹  ë°©ì‹ì´ ì—„ê²© | ì¶”ìƒí™”ë˜ì–´ ìˆì–´ ëŠìŠ¨í•œ ì—°ê²° í˜•íƒœ

## ğŸ“Œ REST API êµ¬ì„± ìš”ì†Œ
- ìì›(Resource)
  - ë¦¬ì†ŒìŠ¤ëŠ” ì„œë²„ì— ì¡´ì¬í•˜ê³  ëª¨ë“  ìì›ì— ê³ ìœ í•œ ID ì¡´ì¬
  - HTTP URIë¥¼ í†µí•´ ìì›ì„ êµ¬ë³„(`/api/v1/cafes/[cafe:id]`)
  - í´ë¼ì´ì–¸íŠ¸ëŠ” URIë¥¼ í†µí•´ ì›í•˜ëŠ” ìì›ì„ ì„¤ì •í•˜ê³  ì´ë¥¼ ì¡°íšŒ, ì¡°ì‘í•˜ëŠ” ìš”ì²­ì„ ì„œë²„ì— ë³´ë‚¼ ìˆ˜ ìˆìŒ
- í–‰ìœ„(Verb)
  - HTTPì— ê¸°ë°˜í•˜ê³  ìˆê¸° ë•Œë¬¸ì— HTTPí”„ë¡œí† ì½œì˜ Methodë¥¼ ì‚¬ìš©í•œë‹¤.
  - GET, POST, PUT, PATCH, DELETE ê¸°ëŠ¥ ì œê³µ
- í‘œí˜„(Representation of Resource)
  - í´ë¼ì´ì–¸íŠ¸ê°€ ìì›ì— ëŒ€í•œ ë‚´ìš©ì„ ìš”ì²­í•˜ë©´ ì„œë²„ëŠ” ì´ì— ëŒ€í•œ ì‘ì—…ì„ ì§„í–‰í•´ì£¼ê³  ì ì ˆí•œ ì‘ë‹µì„ ë³´ëƒ„
  - í•˜ë‚˜ì˜ ìì›ì€ JSON, XML, TEXT ë“± ì—¬ëŸ¬ í˜•íƒœë¡œ ì‘ë‹µ í‘œí˜„(JSONì´ ëŒ€ì„¸)

## ğŸ“Œ ì„¤ê³„ ê·œì¹™(API Naming ê°€ì´ë“œ)

### Singletonê³¼ Collection Resource êµ¬ë¶„
- customer ë„ë©”ì¸
- `/customers`: Collection
- `/customers/{customerId}`: Singleton

### Collection, Sub-collection Resources êµ¬ë¶„
- customer ë„ë©”ì¸ ì•ˆì— account ìì› ì¡´ì¬í•˜ëŠ” ê²½ìš°
- `/customers/{customerId}/accounts`: accountì— ëŒ€í•œ collection
- `/customers/{customerId}/accounts/{accountId}`: accountì— ëŒ€í•œ singleton

### Resource Archetypes
- REST APIëŠ” 4ê°œì˜ êµ¬ë³„ëœ resource archetypesë¥¼ ê°€ì§„ë‹¤.
- `document`, `collection`, `store`, `controller`

#### Document
- ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì™€ ìœ ì‚¬í•œ ë‹¨ì¼ ê°œë…
- ë‹¨ìˆ˜ ê°œì˜ ë¦¬ì†ŒìŠ¤ í‘œí˜„
```text
http://api.beaniejoy.io/users/{userId}
```

#### Collection
- ì„œë²„ê°€ ê´€ë¦¬í•˜ëŠ” ë¦¬ì†ŒìŠ¤ë“¤ì˜ ë¬¶ìŒ
- collectionì„ í†µí•´ í´ë¼ì´ì–¸íŠ¸ê°€ ìƒˆë¡œìš´ ë¦¬ì†ŒìŠ¤ë¥¼ ì¶”ê°€ ìš”ì²­
```text
http://api.beaniejoy.io/users
```

#### Store
- ì„œë²„ê°€ ì•„ë‹Œ í´ë¼ì´ì–¸íŠ¸ê°€ ê´€ë¦¬í•˜ëŠ” ë¦¬ì†ŒìŠ¤
- í´ë¼ì´ì–¸íŠ¸ê°€ ë¦¬ì†ŒìŠ¤ë¥¼ ë”°ë¡œ ì €ì¥í•˜ê³  ì‚­ì œí•˜ê³  ë³µêµ¬í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©
```text
http://api.beaniejoy.io/users/{userId}/playlists
```

#### Controller
- ì‹¤í–‰ê°€ëŠ¥í•œ í•¨ìˆ˜ë¥¼ í‘œí˜„
- parameter, return valuesë¥¼ ê°€ì§„ input, outputì„ ê°€ì§
- ë™ì‚¬í˜•ìœ¼ë¡œ ì‚¬ìš©
```text
http://api.beaniejoy.io/users/{userId}/playlists/play
```

### Consistent Resource Naming Conventions
- ì •ë³´ì˜ ìì›ì„ í‘œí˜„í•´ì•¼ í•¨
  - `/members/1`
- í–‰ìœ„(Method)ëŠ” URLì— í¬í•¨í•˜ë©´ ì•ˆë¨
  - `/memeber/get/1`, `/delete-cafe` X
- `_`(underbar) ì‚¬ìš© ëŒ€ì‹  `-`(dash) ì‚¬ìš©
  -  `/hello_java` X -> `/hello-java` 
- ë§ˆì§€ë§‰ì— `/` í¬í•¨í•˜ë©´ ì•ˆë¨
  - `/users/1/` X -> `/users/1` O
- ëŒ€ë¬¸ìë³´ë‹¤ëŠ” ì†Œë¬¸ìê°€ ì í•©
- íŒŒì¼ í™•ì¥ìë¥¼ ì‚¬ìš©í•˜ì§€ ë§ì
  - `/device/managed-devices.xml` X -> `/device/managed-devices` O
- query component ì‚¬ìš©
  - collectionì— ëŒ€í•œ filtering, sorting, paginationì´ í•„ìš”í•œ ê²½ìš° API ìƒˆë¡œ ë§Œë“¤ì§€ ë§ê³  query component ì‚¬ìš©í•  ê²ƒ
  - `/device/managed-devices?region=KR&sort=date`


## References
- [RedHat - APIë€ (ê°œë…, ê¸°ëŠ¥, ì¥ì )](https://www.redhat.com/ko/topics/api/what-are-application-programming-interfaces)
- [ìœ„ì‹œìº£ - SOAP vs REST ì°¨ì´](http://blog.wishket.com/soap-api-vs-rest-api-%EB%91%90-%EB%B0%A9%EC%8B%9D%EC%9D%98-%EA%B0%80%EC%9E%A5-%ED%81%B0-%EC%B0%A8%EC%9D%B4%EC%A0%90%EC%9D%80/)
- [RESTful API ì„¤ê³„ ê°€ì´ë“œ - ìƒì„¸í•œ ì„¤ëª… Good](https://sanghaklee.tistory.com/57)